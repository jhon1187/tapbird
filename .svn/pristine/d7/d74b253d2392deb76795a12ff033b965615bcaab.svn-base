#include "scripts/background.angelscript"
#include "scripts/chao.angelscript"
#include "scripts/player.angelscript"
#include "scripts/obstaculos.angelscript"

vector2 screenSize;
float cameraDisplaceY;

int widthFix = 768;
int heightFix = 1280;

bool gameOver = false;

void main()
{		
	SetFixedWidth(widthFix);
	SetFixedHeight(heightFix);
	
	screenSize = GetScreenSize();
			
	LoadScene("scenes/cena1.esc", "onSceneLoaded", "onSceneUpdate", "onSceneResume", vector2((1920+screenSize.x), screenSize.y));
		
}

void loadSprites()
{
	//entities
	LoadSprite("entities/bg.png");
	LoadSprite("entities/chaoTop.png");
	LoadSprite("entities/chaoDown.png");
	LoadSprite("entities/fade.png");
	LoadSprite("entities/obstTop.png");
	LoadSprite("entities/obstDown.png");
	LoadSprite("entities/player.png");
	LoadSprite("entities/playerTap.png");
}

void loadSounds(){
	LoadSoundEffect("soundfx/sfx_die.ogg");
	LoadSoundEffect("soundfx/sfx_hit.ogg");
	LoadSoundEffect("soundfx/sfx_point.ogg");
	LoadSoundEffect("soundfx/sfx_swooshing.ogg");
	LoadSoundEffect("soundfx/sfx_wing.ogg");

	SetGlobalVolume(1.0f);
}

void onSceneLoaded()
{	
	loadSprites();
	loadSounds();
	
	drawBackgroundFirstTime();
	drawChaoFirstTime();
	drawPlayerFirstTime();
	drawObstaculos();
}

void onSceneUpdate()
{
	if(!gameOver){
		updateBackground();
		updateChao();
		movePlayer();
		updateObstaculos();
	}
}

void onSceneResume()
{
	
}